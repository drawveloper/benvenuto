(function() {
  var app, coffeecup;

  app = require('express').createServer();

  coffeecup = require('../../src/coffeecup');

  app.set('view engine', 'coffee');

  app.register('.coffee', coffeecup.adapters.express);

  app.get('/', function(req, res) {
    return res.render('index');
  });

  app.get('/login', function(req, res) {
    return res.render('login', {
      foo: 'bar',
      locals: {
        ping: 'pong'
      }
    });
  });

  app.get('/inline', function(req, res) {
    return res.send(coffeecup.render(function() {
      return h1('This is an inline template.');
    }));
  });

  app.listen(3000);

  console.log("Listening on 3000...");

}).call(this);
